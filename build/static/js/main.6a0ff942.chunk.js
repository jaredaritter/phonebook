(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),c=t.n(r),o=t(6),a=t(3),u=t(2),i=t(0),l=function(e){return Object(i.jsxs)("li",{children:[e.person.name,": ",e.person.number," ",Object(i.jsx)("button",{onClick:e.deletePerson,children:"-"})]})},s=function(e){return e.people.map((function(n){return Object(i.jsx)(l,{person:n,deletePerson:function(){return e.deletePerson(n.id)}},n.id)}))},d=function(e){return Object(i.jsxs)("div",{children:["filter shown with"," ",Object(i.jsx)("input",{type:"text",value:e.filter,onChange:e.handleChange})]})},f=function(e){return Object(i.jsxs)("div",{children:["name:"," ",Object(i.jsx)("input",{type:"text",value:e.nameValue,onChange:e.handleNameChange})]})},b=function(e){return Object(i.jsxs)("div",{children:["number:"," ",Object(i.jsx)("input",{type:"tel",value:e.numberValue,onChange:e.handleNumberChange})]})},h=function(e){return Object(i.jsxs)("form",{action:"",onSubmit:e.addPerson,children:[Object(i.jsx)(f,{nameValue:e.nameValue,handleNameChange:e.handleNameChange}),Object(i.jsx)(b,{numberValue:e.numberValue,handleNumberChange:e.handleNumberChange}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{children:"add"})})]})},j=function(e){var n=e.message;return null===n?null:n.error?Object(i.jsx)("div",{className:"error",children:n.content}):Object(i.jsx)("div",{className:"success",children:n.content})},m=t(4),O=t.n(m),p="/api/persons",g={getAll:function(){return O.a.get(p).then((function(e){return e.data}))},create:function(e){return O.a.post(p,e).then((function(e){return e.data}))},update:function(e,n){return O.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return O.a.delete("".concat(p,"/").concat(e))}},x=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(""),l=Object(a.a)(c,2),f=l[0],b=l[1],m=Object(u.useState)(""),O=Object(a.a)(m,2),p=O[0],x=O[1],v=Object(u.useState)(""),C=Object(a.a)(v,2),w=C[0],N=C[1],k=Object(u.useState)(null),P=Object(a.a)(k,2),y=P[0],V=P[1];Object(u.useEffect)((function(){g.getAll().then((function(e){r(e)}))}),[]);var S=function(e){if(window.confirm("".concat(e.name," is already in the phonebook. Replace old number with new one?"))){var n=t.find((function(n){return n.name===e.name})),c=Object(o.a)(Object(o.a)({},n),{},{number:e.number});g.update(n.id,c).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e}))),b(""),x(""),V({content:"".concat(e.name,"'s number updated"),error:!1}),setTimeout((function(){V(null)}),5e3)})).catch((function(e){V({content:"".concat(n.name," was already deleted from the server"),error:!0}),setTimeout((function(){V(null)}),5e3),r(t.filter((function(e){return e.id!==n.id})))}))}else console.log("not updating anything")},A=function(e){return t.filter((function(n){return n.name===e})).length>0},T=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(j,{message:y}),Object(i.jsx)(d,{filter:w,handleChange:function(e){N(e.target.value)}}),Object(i.jsx)("h2",{children:"Add a New Person"}),Object(i.jsx)(h,{addPerson:function(e){if(e.preventDefault(),""===f)return alert("A name is required");if(""===p)return alert("A number is required");var n={name:f,number:p};A(f)?S(n):g.create(n).then((function(e){r(t.concat(e)),b(""),x(""),V({content:"".concat(e.name," added to the phonebook"),error:!1}),setTimeout((function(){V(null)}),5e3)}))},nameValue:f,handleNameChange:function(e){b(e.target.value)},numberValue:p,handleNumberChange:function(e){x(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(s,{people:T,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&g.remove(e).then((function(c){r(t.filter((function(n){return n.id!==e}))),V({content:"".concat(n.name," removed from phonebook"),error:!1}),setTimeout((function(){V(null)}),5e3)})).catch((function(n){console.log(n),V({content:"Person ".concat(e," was already removed"),error:!0}),setTimeout((function(){V(null)}),5e3),r(t.filter((function(n){return n.id!==e})))}))}})]})};t(39);c.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.6a0ff942.chunk.js.map